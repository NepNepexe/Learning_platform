{"remainingRequest":"/Users/xiekun/Pictures/sabi/dasabi/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/xiekun/Pictures/sabi/dasabi/src/components/uploadHomework.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/xiekun/Pictures/sabi/dasabi/src/components/uploadHomework.vue","mtime":1593668399406},{"path":"/Users/xiekun/Pictures/sabi/dasabi/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/xiekun/Pictures/sabi/dasabi/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/xiekun/Pictures/sabi/dasabi/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/xiekun/Pictures/sabi/dasabi/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IHVwbG9hZCB9IGZyb20gIkAvYXBpL21vZHVsZXMvc3R1ZGVudC5qcyI7CmltcG9ydCB7IGdldENvb2tpZSwgc2V0Q29va2llLCByZW1vdmVDb29raWUgfSBmcm9tICJAL2xpYnMvY29va2llIjsKZXhwb3J0IGRlZmF1bHQgewogIC8vIOWumuS5iXByb3Bz5bGe5oCn77yM55So5LqO5o6l5pS254i257uE5Lu25omA5Lyg6YCS6L+H5p2l55qE5pWw5o2uCiAgcHJvcHM6IFsiY2hhcHRlciJdLAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICB1cGxvYWREYXRhOiB7CiAgICAgICAgZmlsZU5hbWU6ICIiCiAgICAgIH0sCiAgICAgIHN0dWRlbnRJZDogIiIsCiAgICB9OwogIH0sCgogIG1vdW50ZWQoKSB7CiAgICBsZXQgdXNlciA9IEpTT04ucGFyc2UoZ2V0Q29va2llKCJ1c2VyIikgfHwgJ3t9Jyk7CiAgICB0aGlzLnN0dWRlbnRJZCA9IHVzZXIuZXRjLmlkOwogIH0sCiAgbWV0aG9kczogewogICAgdXBsb2FkKHBhcmFtKSB7CiAgICAgIGNvbnN0IGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKCk7CiAgICAgIC8vIOiOt+WPluaWh+S7tuWQjQogICAgICB2YXIgZmlsZU5hbWUgPSBwYXJhbS5maWxlLm5hbWU7CiAgICAgIC8vIOa3u+WKoOWPguaVsAogICAgICBmb3JtRGF0YS5hcHBlbmQoImZpbGUiLCBwYXJhbS5maWxlKTsKICAgICAgZm9ybURhdGEuYXBwZW5kKCJmaWxlTmFtZSIsIGZpbGVOYW1lKTsKICAgICAgZm9ybURhdGEuYXBwZW5kKCJjaGFwdGVySWQiLCB0aGlzLmNoYXB0ZXIuaWQpOwogICAgICBmb3JtRGF0YS5hcHBlbmQoInN0dWRlbnRJZCIsIHRoaXMuc3R1ZGVudElkKTsKICAgICAgLy8g5ZCR5ZCO5Y+w5Y+R6YCB5paH5Lu2CiAgICAgIHVwbG9hZChmb3JtRGF0YSkKICAgICAgICAudGhlbihyZXMgPT4gewogICAgICAgICAgaWYgKHJlcy5kYXRhLnN1Y2Nlc3MpIHsKICAgICAgICAgICAgY29uc29sZS5sb2coIuS4iuS8oOaIkOWKnyIpOwogICAgICAgICAgICBwYXJhbS5vblN1Y2Nlc3MoKTsKICAgICAgICAgICAgdGhpcy50b2FzdChyZXMuZGF0YS5tZXNzYWdlLCAxKTsKICAgICAgICAgIH0KICAgICAgICB9KQogICAgICAgIC5jYXRjaChlcnIgPT4gewogICAgICAgICAgdGhpcy50b2FzdChlcnIsIDIpOwogICAgICAgIH0pOwogICAgfSwKICAgIHN1Ym1pdFVwbG9hZCgpIHsKICAgICAgdGhpcy4kcmVmcy51cGxvYWQuc3VibWl0KCk7CiAgICB9LAogICAgaGFuZGxlUmVtb3ZlKGZpbGUsIGZpbGVMaXN0KSB7CiAgICAgIGNvbnNvbGUubG9nKGZpbGUsIGZpbGVMaXN0KTsKICAgIH0sCiAgICBoYW5kbGVQcmV2aWV3KGZpbGUpIHsKICAgICAgY29uc29sZS5sb2coZmlsZSk7CiAgICB9LAogICAgaGFuZGxlU3VjY2VzcyhyZXMsIGZpbGUpIHt9CiAgfQp9Owo="},{"version":3,"sources":["uploadHomework.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;AAeA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"uploadHomework.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <el-upload\n    class=\"upload-demo\"\n    action=\"#\"\n    :on-preview=\"handlePreview\"\n    :on-remove=\"handleRemove\"\n    :auto-upload=\"false\"\n    :http-request=\"upload\"\n    :on-success=\"handleSuccess\"\n  >\n    <el-button slot=\"trigger\" size=\"small\" type=\"primary\">选取文件</el-button>\n    <el-button style=\"margin-left: 10px;\" size=\"small\" type=\"success\" @click=\"submitUpload\">上传</el-button>\n  </el-upload>\n</template>\n<script>\nimport { upload } from \"@/api/modules/student.js\";\nimport { getCookie, setCookie, removeCookie } from \"@/libs/cookie\";\nexport default {\n  // 定义props属性，用于接收父组件所传递过来的数据\n  props: [\"chapter\"],\n  data() {\n    return {\n      uploadData: {\n        fileName: \"\"\n      },\n      studentId: \"\",\n    };\n  },\n\n  mounted() {\n    let user = JSON.parse(getCookie(\"user\") || '{}');\n    this.studentId = user.etc.id;\n  },\n  methods: {\n    upload(param) {\n      const formData = new FormData();\n      // 获取文件名\n      var fileName = param.file.name;\n      // 添加参数\n      formData.append(\"file\", param.file);\n      formData.append(\"fileName\", fileName);\n      formData.append(\"chapterId\", this.chapter.id);\n      formData.append(\"studentId\", this.studentId);\n      // 向后台发送文件\n      upload(formData)\n        .then(res => {\n          if (res.data.success) {\n            console.log(\"上传成功\");\n            param.onSuccess();\n            this.toast(res.data.message, 1);\n          }\n        })\n        .catch(err => {\n          this.toast(err, 2);\n        });\n    },\n    submitUpload() {\n      this.$refs.upload.submit();\n    },\n    handleRemove(file, fileList) {\n      console.log(file, fileList);\n    },\n    handlePreview(file) {\n      console.log(file);\n    },\n    handleSuccess(res, file) {}\n  }\n};\n</script>\n\n<style>\n  input[type=\"file\"] {\n    display: none;\n  }\n</style>\n\n"]}]}