{"remainingRequest":"/Users/xiekun/Pictures/sabi/dasabi/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/xiekun/Pictures/sabi/dasabi/src/components/uploadHomework.vue?vue&type=style&index=0&lang=css&","dependencies":[{"path":"/Users/xiekun/Pictures/sabi/dasabi/src/components/uploadHomework.vue","mtime":1593668399406},{"path":"/Users/xiekun/Pictures/sabi/dasabi/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/xiekun/Pictures/sabi/dasabi/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/xiekun/Pictures/sabi/dasabi/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/xiekun/Pictures/sabi/dasabi/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/xiekun/Pictures/sabi/dasabi/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgppbnB1dFt0eXBlPSJmaWxlIl0gewogIGRpc3BsYXk6IG5vbmU7Cn0K"},{"version":3,"sources":["uploadHomework.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuEA;AACA;AACA","file":"uploadHomework.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <el-upload\n    class=\"upload-demo\"\n    action=\"#\"\n    :on-preview=\"handlePreview\"\n    :on-remove=\"handleRemove\"\n    :auto-upload=\"false\"\n    :http-request=\"upload\"\n    :on-success=\"handleSuccess\"\n  >\n    <el-button slot=\"trigger\" size=\"small\" type=\"primary\">选取文件</el-button>\n    <el-button style=\"margin-left: 10px;\" size=\"small\" type=\"success\" @click=\"submitUpload\">上传</el-button>\n  </el-upload>\n</template>\n<script>\nimport { upload } from \"@/api/modules/student.js\";\nimport { getCookie, setCookie, removeCookie } from \"@/libs/cookie\";\nexport default {\n  // 定义props属性，用于接收父组件所传递过来的数据\n  props: [\"chapter\"],\n  data() {\n    return {\n      uploadData: {\n        fileName: \"\"\n      },\n      studentId: \"\",\n    };\n  },\n\n  mounted() {\n    let user = JSON.parse(getCookie(\"user\") || '{}');\n    this.studentId = user.etc.id;\n  },\n  methods: {\n    upload(param) {\n      const formData = new FormData();\n      // 获取文件名\n      var fileName = param.file.name;\n      // 添加参数\n      formData.append(\"file\", param.file);\n      formData.append(\"fileName\", fileName);\n      formData.append(\"chapterId\", this.chapter.id);\n      formData.append(\"studentId\", this.studentId);\n      // 向后台发送文件\n      upload(formData)\n        .then(res => {\n          if (res.data.success) {\n            console.log(\"上传成功\");\n            param.onSuccess();\n            this.toast(res.data.message, 1);\n          }\n        })\n        .catch(err => {\n          this.toast(err, 2);\n        });\n    },\n    submitUpload() {\n      this.$refs.upload.submit();\n    },\n    handleRemove(file, fileList) {\n      console.log(file, fileList);\n    },\n    handlePreview(file) {\n      console.log(file);\n    },\n    handleSuccess(res, file) {}\n  }\n};\n</script>\n\n<style>\n  input[type=\"file\"] {\n    display: none;\n  }\n</style>\n\n"]}]}