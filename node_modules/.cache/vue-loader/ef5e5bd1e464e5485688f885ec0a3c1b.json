{"remainingRequest":"/Users/xiekun/Pictures/sabi/dasabi/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/xiekun/Pictures/sabi/dasabi/src/components/subvideo.vue?vue&type=style&index=0&id=72e874cb&lang=less&scoped=true&","dependencies":[{"path":"/Users/xiekun/Pictures/sabi/dasabi/src/components/subvideo.vue","mtime":1593668399405},{"path":"/Users/xiekun/Pictures/sabi/dasabi/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/xiekun/Pictures/sabi/dasabi/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/xiekun/Pictures/sabi/dasabi/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/xiekun/Pictures/sabi/dasabi/node_modules/less-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/xiekun/Pictures/sabi/dasabi/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/xiekun/Pictures/sabi/dasabi/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKLnZpZGVvIHsKICBwb3NpdGlvbjogcmVsYXRpdmU7CgogIHZpZGVvIHsKICAgIHdpZHRoOiAxMDAlOwogICAgaGVpZ2h0OiAxMDAlOwogIH0KICAgLmNvbnRyb2xsZXJfX2J0bi13cmFwcGVyIHsKICAgICAgICBwb3NpdGlvbjogcmVsYXRpdmU7CiAgICAgICAgaGVpZ2h0OiBjYWxjKDEwMCUgLSA1cHgpOwogICAgICAgIGRpc3BsYXk6IGZsZXg7CiAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjsKICAgICAgICBjb2xvcjogI2ZmZjsKICAgICAgICBwYWRkaW5nOiAwIDE4cHg7CiAgICB9CgogICAgLmNvbnRyb2xsZXJfX2J0biB7CiAgICAgICAgY3Vyc29yOiBwb2ludGVyOwogICAgICAgIHRyYW5zaXRpb246IDAuNXM7CiAgICAgICAgbWFyZ2luOiAwIDIwcHg7CiAgICB9CgogICAgLmNvbnRyb2xsZXJfX2J0bjpob3ZlciB7CiAgICAgICAgIGNvbG9yOiAjNDA5ZWZmOwogICAgfQoKICAgIC5jb250cm9sbGVyX190aW1lciB7CiAgICAgICAgbWFyZ2luLWxlZnQ6IDE1cHg7CiAgICB9CgogICAgLmNvbnRyb2xsZXJfX2J0bi0tZnVsbHNjcmVlbiB7CiAgICAgICAgcG9zaXRpb246IGFic29sdXRlOwogICAgICAgIHJpZ2h0OiAxNXB4OwogICAgfQoKICAuY29udHJvbGxlcl9fcHJvZ3Jlc3Mtd3JhcHBlciB7CiAgICAgICAgd2lkdGg6IDEwMCU7CiAgICAgICAgZGlzcGxheTogZmxleDsKICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsKICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyOwp9CiAuY29udHJvbGxlcl9fcHJvZ3Jlc3MgewogICAgICAgIGhlaWdodDogNXB4OwogICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTsKICAgICAgICB3aWR0aDogY2FsYygxMDAlIC0gMzBweCk7CiAgICAgICAgYm9yZGVyLXJhZGl1czogMTAwcHg7CiAgICAgICAgYmFja2dyb3VuZDogI2RjZGNkYzsKICAgICAgICBjdXJzb3I6IHBvaW50ZXI7CiAgICB9CgogICAgLmNvbnRyb2xsZXJfX3Byb2dyZXNzLS1wYXNzZWQgewogICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICAgICAgICB0b3A6IDA7CiAgICAgICAgbGVmdDogMDsKICAgICAgICBiYWNrZ3JvdW5kOiAjNDA5RUZGOwogICAgfQoKICAgIC5jb250cm9sbGVyX19kb3QgewogICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICAgICAgICB6LWluZGV4OiA1MDsKICAgICAgICBsZWZ0OiAwOwogICAgICAgIHRvcDogLTVweDsKICAgICAgICB3aWR0aDogMTVweDsKICAgICAgICBoZWlnaHQ6IDE1cHg7CiAgICAgICAgYm9yZGVyLXJhZGl1czogNTAlOwogICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNmZmY7CiAgICAgICAgZGlzcGxheTogZmxleDsKICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsKICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyOwogICAgfQoKICAgIC5jb250cm9sbGVyX19pbm5lci1kb3QgewogICAgICAgIHdpZHRoOiA1cHg7CiAgICAgICAgaGVpZ2h0OiA1cHg7CiAgICAgICAgYm9yZGVyLXJhZGl1czogNTAlOwogICAgICAgIGJhY2tncm91bmQtY29sb3I6ICM0MDlFRkY7CiAgICB9CiAgLmNvbnRyb2xzIHsKICAgIHdpZHRoOiAxMDAlOwogICAgaGVpZ2h0OiA0MHB4OwogICAgcG9zaXRpb246IGFic29sdXRlOwogICAgYm90dG9tOiAwOwogICAgbGVmdDogMDsKICAgIGJhY2tncm91bmQ6IHJnYmEoMCwgMCwgMCwgMC41KTsKICAgIGRpc3BsYXk6IGZsZXg7CiAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47CiAgICBhbGlnbi1pdGVtczogY2VudGVyOwogICAgc3BhbiB7CiAgICAgIHBhZGRpbmc6IDAgNXB4OwogICAgICBjb2xvcjogI2ZmZjsKICAgIH0KICB9Cn0K"},{"version":3,"sources":["subvideo.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoOA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"subvideo.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div class=\"video\">\n    <video ref=\"myvideo\" @canplay=\"getTotal\" @timeupdate=\"timeUpdate\" @click=\"showControls\">\n      <source :src=\"src\" />\n    </video>\n    <transition\n      enter-active-class=\"animated fadeIn slow\"\n      leave-active-class=\"animated fadeOut slow\"\n    >\n    \n      <div class=\"controls\" v-show=\"isShow\">\n        \n      \n         \n        <div class=\"con_left\">\n          <!-- 播放与暂停 -->\n          <span :class=\"{'icon-play3':!isPaused,'icon-pause2':isPaused}\" @click=\"togglePlay\"></span>\n          <!-- 停止 -->\n          <span class=\"icon-stop2\" @click=\"stopPlay\"></span>\n          <!-- 播放时间/总时长 -->\n          <span>{{currentTime}}/{{totalTime}}</span>\n        </div>\n\n         <!-- 播放条 -->\n          <div class=\"controller__progress-wrapper\">\n            <div class=\"controller__progress\" ref=\"p\" @click=\"handleProgressClick($event)\">\n                <div class=\"controller__progress controller__progress--passed\"\n                        :style=\"{width: videoProgressPercent}\"></div>\n                <div class=\"controller__dot\"\n                        :style=\"{left: videoProgressPercent}\"\n                        @pointerdown=\"startDragging($event)\">\n                    <div class=\"controller__inner-dot\"></div>\n                </div>\n            </div>\n        </div>\n\n        <div class=\"con_right\">\n          <!-- 声音 -->\n          <span\n            :class=\"{'icon-volume-low':!isMuted,'icon-volume-mute2':isMuted}\"\n            @click=\"toggleMuted\"\n          ></span>\n          <!-- 全屏 -->\n          <span class=\"icon-loop\" @click=\"toggleFullScreen\"></span>\n        </div>\n         \n      </div>\n\n    </transition>\n  </div>\n</template>\n\n<script>\nimport \"animate.css\";\n// 引入字体样式文件\nimport '@/styles/videostyle.css'\nexport default {\n  // 定义props属性，用于接收父组件所传递过来的数据\n  props: [\"src\"],\n  data() {\n    return {\n      myvideo: null,\n      // 标记当前的播放状态\n      isPaused: false,\n      // 标记当前视频是否是静音\n      isMuted: false,\n      // 当前播放时间\n      currentTime: \"00:00\",\n      // 总时长\n      totalTime: \"00:00\",\n      //拖动进度条\n      isDragging: false,\n      // 标记控制面板是否可见\n      isShow: true,\n      // startTime:开始时间,以毫秒做为单位\n      startTime: 0,\n      //播放条进度\n      videoProgress: 0,\n      \n       draggingStartX: 0,\n        dotOffsetX: 0,\n        progress: null,\n    };\n  },\n\n  mounted() {\n\n        this.progress = this.$refs.p;\n     console.log( 'progress'+this.progress)\n    // 获取播放器元素\n    this.myvideo = this.$refs.myvideo;                                         \n    // 记住起始的时间,这个时间可以做为时间间隔的参照\n    this.startTime = Date.now()\n    // 开户一个定时器\n    setInterval(() => {\n        if(Date.now() - this.startTime > 5000){\n            this.isShow = false\n        }\n    }, 1000);\n  },\n  computed: {\n    videoProgressPercent() {\n        return `${this.videoProgress * 100}%`;\n    }\n  },\n  methods: {\n    // 播放与暂停\n    togglePlay() {\n      // 在视频标签(video)原生方法中\n      // play():让视频播放\n      // pause():让视频暂停\n      // 修改当前的播放状态\n      this.isPaused = !this.isPaused;\n      if (this.isPaused) {\n        this.myvideo.play();\n      } else {\n        this.myvideo.pause();\n      }\n    },\n    // 停止 播放\n    stopPlay() {\n      // 没有提供原生的stop方法\n      // this.myvideo.stop()\n      this.myvideo.pause(); \n      // currentTime这个属性就是用来标记当前视频播放到的时间，以秒做为单位\n      this.myvideo.currentTime = 0;\n      // 重置播放状态为初始值\n      this.isPaused = false;\n    },\n    // 时间格式化处理\n    timeFormat(time) {\n      let minute = Math.floor((time % 3600) / 60);\n      let second = Math.floor(time % 60);\n      minute = minute < 10 ? \"0\" + minute : minute;\n      second = second < 10 ? \"0\" + second : second;\n      return `${minute}:${second}`;\n    },\n    // 获取总时长\n    getTotal() {\n      this.totalTime = this.timeFormat(this.myvideo.duration);\n    },\n    // 获取当前视频播放到的时间\n    timeUpdate() {\n      this.currentTime = this.timeFormat(this.myvideo.currentTime);\n      this.videoProgress = this.myvideo.currentTime / this.myvideo.duration;\n    },\n\n    //播放条触发点击事件\n    handleProgressClick(event) {\n    const clickX = event.clientX;\n     console.log(clickX)\n    this.setProgress(clickX);  \n     \n},\n    setProgress(x) {   //传递点击位置  \n          \n\nconsole.log(\"Progress：\"+this.progress)\n        const progressRect = this.progress.getBoundingClientRect();   //获取位于窗口的位置\n\n      let progressPercent = (x - progressRect.left) / progressRect.width;\n    \n        if (progressPercent < 0) {\n            progressPercent = 0;\n        } else if (progressPercent > 1) {\n            progressPercent = 1;\n        }\n        this.myvideo.currentTime = this.myvideo.duration * progressPercent;\n    },\n\n    startDragging(event) {  //开始拖动\n        \n        this.isDragging = true;\n        this.draggingStartX = event.clientX;\n        console.log( this.draggingStartX )\n    },\n    moveDragging(event) {    //拖动过程\n        if (this.isDragging) {\n            const offsetX = event.clientX - this.draggingStartX;\n            this.dotOffsetX = offsetX < 0 ? 0 : offsetX;\n            this.setProgress(event.clientX);\n        }\n    },\n\n    stopDragging() {   //结束拖动\n        this.isDragging = false;\n        this.dotOffsetX = 0;\n    },\n\n\n    // 静音操作\n    toggleMuted() {\n      this.isMuted = !this.isMuted;\n      this.myvideo.muted = !this.myvideo.muted;\n    },\n    // 全屏切换\n    // 切换到全屏\n    toggleFullScreen(event) {\n      const myvideo = this.$refs.myvideo;\n      // 如果当前是全屏状态，就退出全屏，否则进入全屏状态\n      // 获取当前的全屏状态\n      let isFullscreen = document.webkitIsFullScreen || document.fullscreen;\n      if (!isFullscreen) {\n        const inFun =\n          myvideo.requestFullscreen || myvideo.webkitRequestFullScreen;\n        // 让当前整个播放器进入到全屏状态\n        inFun.call(myvideo);\n      } else {\n        const exitFun =\n          document.exitFullscreen || document.webkitExitFullscreen;\n        // 退出全屏状态需要使用document\n        exitFun.call(document);\n      }\n    },\n    // 显示控制面板\n    showControls(){\n        this.isShow = true\n        // 一定要记得更新起始时间的参照\n        this.startTime = Date.now()\n    },\n  },\n  \n}\n\n\n</script>\n\n<style lang='less' scoped>\n.video {\n  position: relative;\n\n  video {\n    width: 100%;\n    height: 100%;\n  }\n   .controller__btn-wrapper {\n        position: relative;\n        height: calc(100% - 5px);\n        display: flex;\n        align-items: center;\n        color: #fff;\n        padding: 0 18px;\n    }\n\n    .controller__btn {\n        cursor: pointer;\n        transition: 0.5s;\n        margin: 0 20px;\n    }\n\n    .controller__btn:hover {\n         color: #409eff;\n    }\n\n    .controller__timer {\n        margin-left: 15px;\n    }\n\n    .controller__btn--fullscreen {\n        position: absolute;\n        right: 15px;\n    }\n\n  .controller__progress-wrapper {\n        width: 100%;\n        display: flex;\n        justify-content: center;\n        align-items: center;\n}\n .controller__progress {\n        height: 5px;\n        position: relative;\n        width: calc(100% - 30px);\n        border-radius: 100px;\n        background: #dcdcdc;\n        cursor: pointer;\n    }\n\n    .controller__progress--passed {\n        position: absolute;\n        top: 0;\n        left: 0;\n        background: #409EFF;\n    }\n\n    .controller__dot {\n        position: absolute;\n        z-index: 50;\n        left: 0;\n        top: -5px;\n        width: 15px;\n        height: 15px;\n        border-radius: 50%;\n        background-color: #fff;\n        display: flex;\n        justify-content: center;\n        align-items: center;\n    }\n\n    .controller__inner-dot {\n        width: 5px;\n        height: 5px;\n        border-radius: 50%;\n        background-color: #409EFF;\n    }\n  .controls {\n    width: 100%;\n    height: 40px;\n    position: absolute;\n    bottom: 0;\n    left: 0;\n    background: rgba(0, 0, 0, 0.5);\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    span {\n      padding: 0 5px;\n      color: #fff;\n    }\n  }\n}\n</style>"]}]}