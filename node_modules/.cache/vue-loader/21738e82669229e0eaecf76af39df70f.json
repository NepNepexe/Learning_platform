{"remainingRequest":"/Users/xiekun/Pictures/sabi/dasabi/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/xiekun/Pictures/sabi/dasabi/src/views/login.vue?vue&type=style&index=0&lang=scss&","dependencies":[{"path":"/Users/xiekun/Pictures/sabi/dasabi/src/views/login.vue","mtime":1593611463966},{"path":"/Users/xiekun/Pictures/sabi/dasabi/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/xiekun/Pictures/sabi/dasabi/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/xiekun/Pictures/sabi/dasabi/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/xiekun/Pictures/sabi/dasabi/node_modules/sass-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/xiekun/Pictures/sabi/dasabi/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/xiekun/Pictures/sabi/dasabi/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKLyojcG9zdGVyIHsqLwovKiAgYmFja2dyb3VuZC1pbWFnZTogdXJsKCIuLi9hc3NldHMvbG9naW5CYWNrLmpwZWciKTsqLwovKiAgYmFja2dyb3VuZC1yZXBlYXQ6IG5vLXJlcGVhdDsqLwovKiAgYmFja2dyb3VuZC1zaXplOiBjb3ZlcjsqLwovKiAgaGVpZ2h0OiAxMjAlOyovCi8qICB3aWR0aDogMTIwJTsqLwovKiAgYmFja2dyb3VuZC1zaXplOiBhdXRvOyovCi8qICAvLyBwb3NpdGlvbjogYWJzb2x1dGU7Ki8KLyogIGJhY2tncm91bmQtcG9zaXRpb246IGNlbnRlcjsqLwovKiAgcG9zaXRpb246IGZpeGVkOyovCi8qfSovCgouaXRlbS1hIHsKICBncmlkLWFyZWE6IGhlYWRlcjsKfQouaXRlbS1iIHsKICBncmlkLWFyZWE6IG1haW47Cn0KLml0ZW0tYyB7CiAgZ3JpZC1hcmVhOiBzaWRlYmFyOwp9Ci5pdGVtLWQgewogIGdyaWQtYXJlYTogZm9vdGVyOwp9CgouY29udGFpbmVyIHsKICBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IDUwcHggNTBweCA1MHB4IDUwcHg7CiAgZ3JpZC10ZW1wbGF0ZS1yb3dzOiBhdXRvOwogIGdyaWQtdGVtcGxhdGUtYXJlYXM6CiAgICAgICAgICAiaGVhZGVyIGhlYWRlciBoZWFkZXIgaGVhZGVyIgogICAgICAgICAgIm1haW4gbWFpbiAuIHNpZGViYXIiCiAgICAgICAgICAiZm9vdGVyIGZvb3RlciBmb290ZXIgZm9vdGVyIjsKfQoKLnRpbCB7CiAgbWFyZ2luLWxlZnQ6IC02NSU7CgogIGNvbG9yOiAjMmQ3M2NjOwogIGZvbnQtd2VpZ2h0OiBib2xkZXI7CiAgZm9udC1zaXplOiA2MHB4OwoKfQoubG9naW5faGVhZGVyIHNwYW4gewogIGN1cnNvcjogcG9pbnRlcjsKfQouYWN0aXZlIHsKICBjb2xvcjogIzI5OGFkYjsKfQoubm9fYWNjb3VudCB7CiAgY3Vyc29yOiBwb2ludGVyOwogIGNvbG9yOiAjMjk4YWRiOwogIGZsb2F0OiBsZWZ0OwogIHBhZGRpbmctYm90dG9tOiAzMHB4OwogIGZvbnQtc2l6ZTogMTZweDsKfQouZm9yZ2V0X3Bhc3N3b3JkIHsKICBjdXJzb3I6IHBvaW50ZXI7CiAgY29sb3I6ICMyOThhZGI7CiAgZmxvYXQ6IHJpZ2h0OwogIHBhZGRpbmctYm90dG9tOiAzMHB4OwogIGZvbnQtc2l6ZTogMTZweDsKfQouYmFja2dyb3VuZCB7CiAgd2lkdGg6IDEwMCU7CiAgaGVpZ2h0OiAxMDAlOwogIGJhY2tncm91bmQ6IHVybCgiLi4vYXNzZXRzL2JhY2tncm91bmQucG5nIik7Cn0KLmJveC1jYXJkIHsKICBtYXJnaW46IDAgYXV0bzsKICB3aWR0aDogNDgwcHg7CiAgYm9yZGVyOiBzb2xpZCAxcHggd2hpdGU7CiAgYm9yZGVyLXJhZGl1czogMjBweDsKICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKCRjb2xvcjogd2hpdGUsICRhbHBoYTogMC4xKTsKfQoubXlMb2dpblVJIHsKICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgdG9wOiA1NSU7CiAgbGVmdDogNTAlOwogIG1hcmdpbjogLTI4MHB4IDAgMCAtMjQwcHg7CiAgd2lkdGg6IDQ4MHB4OwogIC8vIGJvcmRlcjogc29saWQgMXB4IHdoaXRlOwogIC8vIGJvcmRlci1yYWRpdXM6IDIwcHg7Cn0KCi5ib3gtY2FyZDpob3ZlciB7CiAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgkY29sb3I6IHdoaXRlLCAkYWxwaGE6IDAuNik7CiAgdHJhbnNpdGlvbjogYWxsIDFzOwp9Cg=="},{"version":3,"sources":["login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+VA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"login.vue","sourceRoot":"src/views","sourcesContent":["<template >\n<div>\n\n   <span class=\"til\" >Dasabi</span>\n <span style=\"border-left:solid 1px #d9d9d9;margin-left: 70px;font-size: 50px;padding-left: 40px;color: grey\">登陆</span>\n\n\n\n<div style=\"background-image: -webkit-linear-gradient(90deg, #3a4457, #F6EAB8);width: 100%;position: fixed;height: 100%;top: 90px;left: 0px\">\n </div>\n  <div class=\"myLoginUI\" >\n    <el-card class=\"box-card\">\n      <div class=\"login_header\">\n        <span @click=\"cur=0\" :class=\"{active:cur==0}\">账号登录</span>\n        <el-divider direction=\"vertical\"></el-divider>\n        <span @click=\"cur=1\" :class=\"{active:cur==1}\">快捷登录</span>\n      </div>\n      <div v-show=\"cur==0\">\n        <h1 class=\"h1\">账号登录</h1>\n        <el-form\n          ref=\"loginForm\"\n          :model=\"loginForm\"\n          :rules=\"loginRules\"\n          class=\"login-form\"\n          autocomplete=\"on\"\n          label-position=\"left\"\n        >\n          <el-form-item class=\"login-form-item\" prop=\"username\">\n            <el-input\n              ref=\"username\"\n              v-model=\"loginForm.username\"\n              placeholder=\"用户名/邮箱/手机号\"\n              name=\"username\"\n              type=\"text\"\n              tabindex=\"1\"\n              autocomplete=\"on\"\n              prefix-icon=\"el-icon-user\"\n            />\n          </el-form-item>\n\n          <el-form-item class=\"login-form-item\" prop=\"password\">\n            <el-input\n              :key=\"passwordType\"\n              ref=\"password\"\n              v-model=\"loginForm.password\"\n              :type=\"passwordType\"\n              placeholder=\"请输入密码\"\n              name=\"password\"\n              tabindex=\"2\"\n              autocomplete=\"on\"\n              prefix-icon=\"el-icon-lock\"\n              @keyup.enter.native=\"handleLogin\"\n            />\n          </el-form-item>\n\n          <el-button\n            :loading=\"loading\"\n            type=\"primary\"\n            style=\"width:100%;margin-bottom:20px;\"\n            @click.native.prevent=\"handleLogin\"\n          >登录</el-button>\n        </el-form>\n      </div>\n\n      <div v-show=\"cur==1\" class=\"Cbody_item\">\n        <h1 class=\"h1\">快捷登录</h1>\n        <el-form\n          ref=\"phoneForm\"\n          :model=\"phoneForm\"\n          :rules=\"phoneRules\"\n          class=\"login-form\"\n          autocomplete=\"on\"\n          label-position=\"left\"\n        >\n          <!-- 手机部分 -->\n          <el-form-item class=\"login-form-item\" prop=\"tel\">\n            <el-input\n              ref=\"tel\"\n              v-model=\"phoneForm.tel\"\n              placeholder=\"手机号\"\n              name=\"tel\"\n              type=\"text\"\n              tabindex=\"1\"\n              autocomplete=\"on\"\n              prefix-icon=\"el-icon-mobile-phone\"\n            />\n          </el-form-item>\n\n          <el-form-item class=\"login-form-item\" prop=\"phonecode\">\n            <el-input\n              placeholder=\"请输入短信验证码\"\n              style=\"width:60%; float: left\"\n              ref=\"phonecode\"\n              v-model=\"phoneForm.phonecode\"\n              name=\"phonecode\"\n              type=\"text\"\n              tabindex=\"1\"\n              autocomplete=\"on\"\n              prefix-icon=\"el-icon-chat-dot-square\"\n            />\n            <el-button\n              type=\"primary\"\n              plain\n              @click=\"getTelCode\"\n              :disabled=\"disabled\"\n              style=\"float: right\"\n            >{{btntxt}}</el-button>\n          </el-form-item>\n\n          <el-button\n            :loading=\"loading\"\n            type=\"primary\"\n            style=\"width:100%;margin-bottom:20px;\"\n            @click.native.prevent=\"fastLogin\"\n          >登录</el-button>\n        </el-form>\n      </div>\n      <span class=\"no_account\" @click=\"go2register\">没有账号？</span>\n      <span class=\"forget_password\" @click=\"go2recovery\">忘记密码？</span>\n\n      <Vcode :show=\"isShow\" @success=\"success\" @close=\"close\" />\n    </el-card>\n  </div>\n </div>\n\n</template>\n\n<script>\n\nimport Vcode from \"vue-puzzle-vcode\";\nimport { login, sendTelCode, loginByTel } from \"@/api/modules/user\";\nimport { getCookie, setCookie, removeCookie } from \"@/libs/cookie\";\nexport default {\n\n  name: \"login\",\n  data() {\n    var checkLength = (rule, value, callback) => {\n      if (!value) {\n        return callback(new Error(\"用户名/邮箱/手机号不能为空\"));\n      }\n\n      if (value.length >= 5) {\n        callback();\n      } else {\n        callback(new Error(\"长度不能小于5\"));\n      }\n    };\n\n\n\n    //邮箱验证\n    var userEmail = (rule, value, callback) => {\n      const mailReg = /^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+(.[a-zA-Z0-9_-])+/;\n\n      if (!value) {\n        return callback(new Error(\"邮箱不能为空\"));\n      }\n      setTimeout(() => {\n        if (mailReg.test(value)) {\n          callback();\n        } else {\n          callback(new Error(\"请输入正确的邮箱格式\"));\n        }\n      }, 100);\n    };\n\n    //手机验证\n    var checkPhone = (rule, value, callback) => {\n      const phoneReg = 11 && /^((13|14|15|17|18)[0-9]{1}\\d{8})$/;\n      this.btntxt = \"获取验证码\";\n      this.time = 0;\n      if (!value) {\n        return callback(new Error(\"手机号不能为空\"));\n      }\n      setTimeout(() => {\n        // Number.isInteger是es6验证数字是否为整数的方法,实际输入的数字总是识别成字符串\n        // 所以在前面加了一个+实现隐式转换\n\n        if (!Number.isInteger(+value)) {\n          callback(new Error(\"请输入数字值\"));\n        } else {\n          if (phoneReg.test(value)) {\n            this.time = 60;\n            this.btntxt = \"获取验证码\";\n            this.disabled = false;\n            callback();\n          } else {\n            callback(new Error(\"电话号码格式不正确\"));\n          }\n        }\n      }, 100);\n    };\n\n    return {\n      loginForm: {\n        username: \"\",\n        password: \"\"\n      },\n      phoneForm: {\n        tel: \"\", //手机号\n        phonecode: \"\" //手机号验证码\n      },\n      loginRules: {\n        username: { validator: checkLength, trigger: \"blur\" },\n        password: { required: true, message: \"密码不能为空\", trigger: \"blur\" },\n        email: { validator: userEmail, trigger: \"blur\" }\n      },\n      phoneRules: {\n        tel: { validator: checkPhone, trigger: \"blur\" },\n        phonecode: {\n          required: true,\n          message: \"验证码不能为空\",\n          trigger: \"blur\"\n        }\n      },\n      isShow: false, // 验证码模态框是否出现\n      loading: false,\n      passwordType: \"password\",\n      redirect: undefined,\n      time: 0, //验证码时间\n      btntxt: \"获取验证码\",\n      disabled: false,\n      cur: 0 //默认选中第一个tab\n    };\n  },\n\n  components: {\n    Vcode\n  },\n\n  methods: {\n\n    // 进入注册页面\n    go2register() {\n      this.navigator(\"/register\");\n    },\n    // 进入忘记密码页面\n    go2recovery() {\n      this.navigator(\"/recovery\");\n    },\n\n    // 点击了登录按钮\n    handleLogin() {\n      this.$refs.loginForm.validate(valid => {\n        if (valid) {\n          this.loading = true;\n          this.isShow = true; //显示验证码模态框\n        }\n      });\n    },\n\n    // 用户通过了验证\n    success(msg) {\n      this.isShow = false; // 通过验证后，需要手动隐藏模态框\n      this.loading = false;\n      login(this.loginForm)\n        .then(resp => {\n          // let token = resp.data.data.token;\n          // setStore(\"token\",token)\n\n          let user = resp.data.data.user;\n      setCookie(\"user\",user)\n\n\n          if (resp.data.statusCode === \"200\") {\n            this.toast(resp.data.message, 1);\n            this.navigator(\"/Home\");\n          }\n        })\n        .catch(data => {\n          this.toast(data, 2);\n        });\n    },\n    // 用户点击遮罩层，应该关闭模态框\n    close() {\n      this.isShow = false;\n      this.loading = false;\n    },\n\n    // 获取手机验证码\n    getTelCode() {\n      // 发送之前验证是否填入手机号\n      this.$refs.phoneForm.validateField(\"tel\", err => {\n        if (!err) {\n          this.time = 60;\n          this.timer();\n          //发送手机验证码\n          sendTelCode({ tel: this.phoneForm.tel })\n            .then(resp => {\n              if (resp.data.statusCode === \"200\") {\n                this.toast(resp.data.message, 1);\n              }\n            })\n            .catch(data => {\n              this.toast(data, 2);\n            });\n        } else {\n          this.disabled = false;\n        }\n      });\n    },\n    timer() {\n      if (this.time > 0) {\n        this.time--;\n        this.btntxt = this.time + \"s后重新获取\";\n        this.disabled = true;\n        setTimeout(this.timer, 1000);\n      } else {\n        this.time = 0;\n        this.btntxt = \"获取验证码\";\n        this.disabled = false;\n      }\n    },\n\n    // 快捷登录按钮\n    fastLogin() {\n      // 点击登录之前验证输入\n      this.$refs.phoneForm.validate(valid => {\n        if (valid) {\n          loginByTel({\n            tel: this.phoneForm.tel,\n            inputCode: this.phoneForm.phonecode\n          })\n            .then(resp => {\n              if (resp.data.statusCode === \"200\") {\n                this.toast(resp.data.message, 1);\n                if (resp.data.data == 1) {\n                  //1 表示新用户 跳转到信息完善界面\n                  this.$router.push({\n                    path: \"/infoRefine\",\n                    query: { tel: this.phoneForm.tel } //携带到下个下个界面的参数\n                  });\n                  console.log(\"跳转到信息完善界面\");\n                } else {\n                  this.navigator(\"/Home\");\n                }\n              } else {\n                this.toast(resp.data.message, 2);\n              }\n            })\n            .catch(data => {\n              this.toast(data, 2);\n            });\n        }\n      });\n    }\n  }\n};\n</script>\n\n<style  lang=\"scss\" >\n/*#poster {*/\n/*  background-image: url(\"../assets/loginBack.jpeg\");*/\n/*  background-repeat: no-repeat;*/\n/*  background-size: cover;*/\n/*  height: 120%;*/\n/*  width: 120%;*/\n/*  background-size: auto;*/\n/*  // position: absolute;*/\n/*  background-position: center;*/\n/*  position: fixed;*/\n/*}*/\n\n.item-a {\n  grid-area: header;\n}\n.item-b {\n  grid-area: main;\n}\n.item-c {\n  grid-area: sidebar;\n}\n.item-d {\n  grid-area: footer;\n}\n\n.container {\n  grid-template-columns: 50px 50px 50px 50px;\n  grid-template-rows: auto;\n  grid-template-areas:\n          \"header header header header\"\n          \"main main . sidebar\"\n          \"footer footer footer footer\";\n}\n\n.til {\n  margin-left: -65%;\n\n  color: #2d73cc;\n  font-weight: bolder;\n  font-size: 60px;\n\n}\n.login_header span {\n  cursor: pointer;\n}\n.active {\n  color: #298adb;\n}\n.no_account {\n  cursor: pointer;\n  color: #298adb;\n  float: left;\n  padding-bottom: 30px;\n  font-size: 16px;\n}\n.forget_password {\n  cursor: pointer;\n  color: #298adb;\n  float: right;\n  padding-bottom: 30px;\n  font-size: 16px;\n}\n.background {\n  width: 100%;\n  height: 100%;\n  background: url(\"../assets/background.png\");\n}\n.box-card {\n  margin: 0 auto;\n  width: 480px;\n  border: solid 1px white;\n  border-radius: 20px;\n  background-color: rgba($color: white, $alpha: 0.1);\n}\n.myLoginUI {\n  position: absolute;\n  top: 55%;\n  left: 50%;\n  margin: -280px 0 0 -240px;\n  width: 480px;\n  // border: solid 1px white;\n  // border-radius: 20px;\n}\n\n.box-card:hover {\n  background-color: rgba($color: white, $alpha: 0.6);\n  transition: all 1s;\n}\n</style>\n"]}]}