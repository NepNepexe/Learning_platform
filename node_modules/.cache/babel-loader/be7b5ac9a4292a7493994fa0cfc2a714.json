{"remainingRequest":"/Users/xiekun/Pictures/sabi/dasabi/node_modules/babel-loader/lib/index.js!/Users/xiekun/Pictures/sabi/dasabi/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/xiekun/Pictures/sabi/dasabi/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/xiekun/Pictures/sabi/dasabi/src/components/uploadHomework.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/xiekun/Pictures/sabi/dasabi/src/components/uploadHomework.vue","mtime":1593668399406},{"path":"/Users/xiekun/Pictures/sabi/dasabi/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/xiekun/Pictures/sabi/dasabi/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/xiekun/Pictures/sabi/dasabi/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/xiekun/Pictures/sabi/dasabi/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZSI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCB7IHVwbG9hZCBhcyBfdXBsb2FkIH0gZnJvbSAiQC9hcGkvbW9kdWxlcy9zdHVkZW50LmpzIjsKaW1wb3J0IHsgZ2V0Q29va2llLCBzZXRDb29raWUsIHJlbW92ZUNvb2tpZSB9IGZyb20gIkAvbGlicy9jb29raWUiOwpleHBvcnQgZGVmYXVsdCB7CiAgLy8g5a6a5LmJcHJvcHPlsZ7mgKfvvIznlKjkuo7mjqXmlLbniLbnu4Tku7bmiYDkvKDpgJLov4fmnaXnmoTmlbDmja4KICBwcm9wczogWyJjaGFwdGVyIl0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHVwbG9hZERhdGE6IHsKICAgICAgICBmaWxlTmFtZTogIiIKICAgICAgfSwKICAgICAgc3R1ZGVudElkOiAiIgogICAgfTsKICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICB2YXIgdXNlciA9IEpTT04ucGFyc2UoZ2V0Q29va2llKCJ1c2VyIikgfHwgJ3t9Jyk7CiAgICB0aGlzLnN0dWRlbnRJZCA9IHVzZXIuZXRjLmlkOwogIH0sCiAgbWV0aG9kczogewogICAgdXBsb2FkOiBmdW5jdGlvbiB1cGxvYWQocGFyYW0pIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHZhciBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YSgpOyAvLyDojrflj5bmlofku7blkI0KCiAgICAgIHZhciBmaWxlTmFtZSA9IHBhcmFtLmZpbGUubmFtZTsgLy8g5re75Yqg5Y+C5pWwCgogICAgICBmb3JtRGF0YS5hcHBlbmQoImZpbGUiLCBwYXJhbS5maWxlKTsKICAgICAgZm9ybURhdGEuYXBwZW5kKCJmaWxlTmFtZSIsIGZpbGVOYW1lKTsKICAgICAgZm9ybURhdGEuYXBwZW5kKCJjaGFwdGVySWQiLCB0aGlzLmNoYXB0ZXIuaWQpOwogICAgICBmb3JtRGF0YS5hcHBlbmQoInN0dWRlbnRJZCIsIHRoaXMuc3R1ZGVudElkKTsgLy8g5ZCR5ZCO5Y+w5Y+R6YCB5paH5Lu2CgogICAgICBfdXBsb2FkKGZvcm1EYXRhKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBpZiAocmVzLmRhdGEuc3VjY2VzcykgewogICAgICAgICAgY29uc29sZS5sb2coIuS4iuS8oOaIkOWKnyIpOwogICAgICAgICAgcGFyYW0ub25TdWNjZXNzKCk7CgogICAgICAgICAgX3RoaXMudG9hc3QocmVzLmRhdGEubWVzc2FnZSwgMSk7CiAgICAgICAgfQogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgX3RoaXMudG9hc3QoZXJyLCAyKTsKICAgICAgfSk7CiAgICB9LAogICAgc3VibWl0VXBsb2FkOiBmdW5jdGlvbiBzdWJtaXRVcGxvYWQoKSB7CiAgICAgIHRoaXMuJHJlZnMudXBsb2FkLnN1Ym1pdCgpOwogICAgfSwKICAgIGhhbmRsZVJlbW92ZTogZnVuY3Rpb24gaGFuZGxlUmVtb3ZlKGZpbGUsIGZpbGVMaXN0KSB7CiAgICAgIGNvbnNvbGUubG9nKGZpbGUsIGZpbGVMaXN0KTsKICAgIH0sCiAgICBoYW5kbGVQcmV2aWV3OiBmdW5jdGlvbiBoYW5kbGVQcmV2aWV3KGZpbGUpIHsKICAgICAgY29uc29sZS5sb2coZmlsZSk7CiAgICB9LAogICAgaGFuZGxlU3VjY2VzczogZnVuY3Rpb24gaGFuZGxlU3VjY2VzcyhyZXMsIGZpbGUpIHt9CiAgfQp9Ow=="},{"version":3,"sources":["uploadHomework.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;AAeA,SAAA,MAAA,IAAA,OAAA,QAAA,0BAAA;AACA,SAAA,SAAA,EAAA,SAAA,EAAA,YAAA,QAAA,eAAA;AACA,eAAA;AACA;AACA,EAAA,KAAA,EAAA,CAAA,SAAA,CAFA;AAGA,EAAA,IAHA,kBAGA;AACA,WAAA;AACA,MAAA,UAAA,EAAA;AACA,QAAA,QAAA,EAAA;AADA,OADA;AAIA,MAAA,SAAA,EAAA;AAJA,KAAA;AAMA,GAVA;AAYA,EAAA,OAZA,qBAYA;AACA,QAAA,IAAA,GAAA,IAAA,CAAA,KAAA,CAAA,SAAA,CAAA,MAAA,CAAA,IAAA,IAAA,CAAA;AACA,SAAA,SAAA,GAAA,IAAA,CAAA,GAAA,CAAA,EAAA;AACA,GAfA;AAgBA,EAAA,OAAA,EAAA;AACA,IAAA,MADA,kBACA,KADA,EACA;AAAA;;AACA,UAAA,QAAA,GAAA,IAAA,QAAA,EAAA,CADA,CAEA;;AACA,UAAA,QAAA,GAAA,KAAA,CAAA,IAAA,CAAA,IAAA,CAHA,CAIA;;AACA,MAAA,QAAA,CAAA,MAAA,CAAA,MAAA,EAAA,KAAA,CAAA,IAAA;AACA,MAAA,QAAA,CAAA,MAAA,CAAA,UAAA,EAAA,QAAA;AACA,MAAA,QAAA,CAAA,MAAA,CAAA,WAAA,EAAA,KAAA,OAAA,CAAA,EAAA;AACA,MAAA,QAAA,CAAA,MAAA,CAAA,WAAA,EAAA,KAAA,SAAA,EARA,CASA;;AACA,MAAA,OAAA,CAAA,QAAA,CAAA,CACA,IADA,CACA,UAAA,GAAA,EAAA;AACA,YAAA,GAAA,CAAA,IAAA,CAAA,OAAA,EAAA;AACA,UAAA,OAAA,CAAA,GAAA,CAAA,MAAA;AACA,UAAA,KAAA,CAAA,SAAA;;AACA,UAAA,KAAA,CAAA,KAAA,CAAA,GAAA,CAAA,IAAA,CAAA,OAAA,EAAA,CAAA;AACA;AACA,OAPA,EAQA,KARA,CAQA,UAAA,GAAA,EAAA;AACA,QAAA,KAAA,CAAA,KAAA,CAAA,GAAA,EAAA,CAAA;AACA,OAVA;AAWA,KAtBA;AAuBA,IAAA,YAvBA,0BAuBA;AACA,WAAA,KAAA,CAAA,MAAA,CAAA,MAAA;AACA,KAzBA;AA0BA,IAAA,YA1BA,wBA0BA,IA1BA,EA0BA,QA1BA,EA0BA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,IAAA,EAAA,QAAA;AACA,KA5BA;AA6BA,IAAA,aA7BA,yBA6BA,IA7BA,EA6BA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,IAAA;AACA,KA/BA;AAgCA,IAAA,aAhCA,yBAgCA,GAhCA,EAgCA,IAhCA,EAgCA,CAAA;AAhCA;AAhBA,CAAA","sourcesContent":["<template>\n  <el-upload\n    class=\"upload-demo\"\n    action=\"#\"\n    :on-preview=\"handlePreview\"\n    :on-remove=\"handleRemove\"\n    :auto-upload=\"false\"\n    :http-request=\"upload\"\n    :on-success=\"handleSuccess\"\n  >\n    <el-button slot=\"trigger\" size=\"small\" type=\"primary\">选取文件</el-button>\n    <el-button style=\"margin-left: 10px;\" size=\"small\" type=\"success\" @click=\"submitUpload\">上传</el-button>\n  </el-upload>\n</template>\n<script>\nimport { upload } from \"@/api/modules/student.js\";\nimport { getCookie, setCookie, removeCookie } from \"@/libs/cookie\";\nexport default {\n  // 定义props属性，用于接收父组件所传递过来的数据\n  props: [\"chapter\"],\n  data() {\n    return {\n      uploadData: {\n        fileName: \"\"\n      },\n      studentId: \"\",\n    };\n  },\n\n  mounted() {\n    let user = JSON.parse(getCookie(\"user\") || '{}');\n    this.studentId = user.etc.id;\n  },\n  methods: {\n    upload(param) {\n      const formData = new FormData();\n      // 获取文件名\n      var fileName = param.file.name;\n      // 添加参数\n      formData.append(\"file\", param.file);\n      formData.append(\"fileName\", fileName);\n      formData.append(\"chapterId\", this.chapter.id);\n      formData.append(\"studentId\", this.studentId);\n      // 向后台发送文件\n      upload(formData)\n        .then(res => {\n          if (res.data.success) {\n            console.log(\"上传成功\");\n            param.onSuccess();\n            this.toast(res.data.message, 1);\n          }\n        })\n        .catch(err => {\n          this.toast(err, 2);\n        });\n    },\n    submitUpload() {\n      this.$refs.upload.submit();\n    },\n    handleRemove(file, fileList) {\n      console.log(file, fileList);\n    },\n    handlePreview(file) {\n      console.log(file);\n    },\n    handleSuccess(res, file) {}\n  }\n};\n</script>\n\n<style>\n  input[type=\"file\"] {\n    display: none;\n  }\n</style>\n\n"],"sourceRoot":"src/components"}]}